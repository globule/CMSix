<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

	<title>globule/CMSIX @ GitHub</title>
	
	<style type="text/css">
		body {
  		margin-top: 1.0em;
  		background-color: #2f64b7;
		  font-family: "Helvetica,Arial,FreeSans"; 
  		color: #ffffff;
    }
    #container {
      margin: 0 auto;
      width: 700px;
    }
		h1 { font-size: 3.8em; color: #d09b48; margin-bottom: 3px; }
		h1 .small { font-size: 0.4em; }
		h1 a { text-decoration: none }
		h2 { font-size: 1.5em; color: #d09b48; }
    h3 { text-align: center; color: #d09b48; }
    a { color: #d09b48; }
    .description { font-size: 1.2em; margin-bottom: 30px; margin-top: 30px; font-style: italic;}
    .download { float: right; }
		pre { background: #000; color: #fff; padding: 15px;}
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .footer { text-align:center; padding-top:30px; font-style: italic; }
	</style>
<script>
	/*
   arCallbacks:Array(1)
      0:
         config:{childList: true, subtree: false}
         fnToRun:"selectFirstImage"
         arParameters:[]
         order:1
         class:"div.images-container"
*/

   // complete following https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver/observe#using_attributefilter
   const postLoad = {
      arPostLoad:[],
      addCallback(selector, options, functionName, parameters, runOrder, unique){
         runOrder=runOrder || false;
         unique=unique || false;

         let target=this.findEntry(selector);
         if(!runOrder)
            runOrder=target.arCallbacks.length;

         this.add( target,{fnToRun:functionName, config: options, arParameters: parameters, order: runOrder},unique);
      },
      run(target){
         if( target.class===undefined||target.class==="")
            return false;

         for(let action of target.arCallbacks){
            window[action.fnToRun]();
         }
      },
      evalClass(targetClass){
         if(targetClass.startsWith('prestashop'))
            targetClass=eval(target);
         return targetClass;
      },
      add(targetToStore, callback, unique){
         let found=false;
         if(unique)
            for( let idx in targetToStore.arCallbacks){
               if(targetToStore.arCallbacks[idx].fnToRun===callback.fnToRun){
                  found=true;
                  targetToStore.arCallbacks[idx].order=callback.order;
               }
            }
         if(!found) {
            targetToStore.arCallbacks.push(callback);
         }
         this.storePostLoad(targetToStore);
      },
      storePostLoad(targetToStore){
         let found=false;
         for( let idx in this.arPostLoad){
            if(this.arPostLoad[idx].class===targetToStore.class){
               found=true;
               this.arPostLoad[idx]=targetToStore;
            }
         }
         if(!found)
            this.arPostLoad.push(targetToStore);

         this.attachEvent(targetToStore);
      },
      attachEvent(target){
         var targetClass=this.evalClass(target.class);

         let DOMtarget = document.querySelector(targetClass).parentElement;

         for( action of target.arCallbacks){
            var observer = new MutationObserver( function(mutations){
               window[action.fnToRun](action.arParameters);
               mutations.forEach(function(mutation) {
                  console.log(mutation.type);
                  console.log(mutation.target);
                  console.log(mutation.addedNodes);
               });
            });
            var config = { childList: true, subtree: false };
            var obs=observer.observe(DOMtarget, config);
         }
      },
      findEntry(className){
         let found={class:className, arCallbacks:[]};
         for( let target of this.arPostLoad)
            if($(target).hasClass(className)){
               found=target;
               break;
            }
         return found;
      },
      checkAvailability(targetClass){
         found=false;
         for(container of prestashop.selectors)
            for(availableTarget of container)
               if(availableTarget===targetClass)
                  found=true;

         return found;
      },
      test(){
         console.log("OK");
         return "OK"
      }
   };

function selectFirstImage(showalert){
   showalert = showalert || false;
   document.querySelectorAll('.thumb-container img.thumb')[0].click();
   if(showalert) alert('OK');
}

postLoad.addCallback(
    'div.images-container',
    { childList: true, subtree: false },
    'selectFirstImage',
    [1],
    1);
</script>	
</head>

<body>
  <a href="http://github.com/globule/CMSIX"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>
  
  <div id="container">

    <div class="download">
      <a href="http://github.com/globule/CMSIX/zipball/master">
        <img border="0" width="90" src="http://github.com/images/modules/download/zip.png"></a>
      <a href="http://github.com/globule/CMSIX/tarball/master">
        <img border="0" width="90" src="http://github.com/images/modules/download/tar.png"></a>
    </div>
      
    <h1><a href="http://github.com/globule/CMSIX">CMSIX</a> 
      <span class="small">by <a href="http://github.com/globule">globule</a></span></h1>

    <div class="description">
      Lightweight MVC CMS
    </div>

    <p>

CMSix is got to be simple, fast, lightweight, extensible and very modular.

Extensions are full MVC, even some core functions so you can suspend their use to replace them with your own !
A very simple template engine helps you to integrate most of html designs.

- A page has many positions, defned in the template, to display content.
- All position can be filled with 'blocks' defined for the current url.
- A block is a view generated from an application by calling the class+method+options.

So you can call the same application with different methods and options in the same page !
This way, data from forms can computed by one or many applications in the same page.

To build your web site, you first define your URLs, then the blocks(apllication & options) with their positions for each URL.
</p><h2>Dependencies</h2>
<p>Apache
PHP 5</p>
<h2>License</h2>
<p>LGPL V3</p>
<h2>Authors</h2>
<p>      Laurent BElloeil</p>
<h2>Contact</h2>
<p> (lbelloeil@yahoo.fr)
<br/>      </p>


    <h2>Download</h2>
    <p>
      You can download this project in either
      <a href="http://github.com/globule/CMSIX/zipball/master">zip</a> or
      <a href="http://github.com/globule/CMSIX/tarball/master">tar</a> formats.
    </p>
    <p>You can also clone the project with <a href="http://git-scm.com">Git</a>
      by running:
      <pre>$ git clone git://github.com/globule/CMSIX</pre>
    </p>
      
    <div class="footer">
      get the source code on GitHub : <a href="http://github.com/globule/CMSIX">globule/CMSIX</a>
    </div>
    
  </div>

  
</body>
</html>
